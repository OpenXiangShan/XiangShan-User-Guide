---
file_authors_:
- zengjinhong <zengjinhong21@mails.ucas.ac.cn> 
---

## 异常与中断

### 概述

异常和中断是处理器从正常程序执行流跳转到特权模式的一种机制，用于应对各种意外或预期的事件。这些机制帮助处理器解决执行过程中遇到的问题，维护系统的稳定性，处理外部事件的响应。

* 异常（Exception）是指处理器在执行当前指令时遇到无法继续执行的情况，需要立即暂停正常的程序流，并进入异常处理程序。异常通常是同步的，即它们与当前正在执行的指令直接相关。常见的异常类型包括：

    1. 非法指令：当处理器遇到无法识别或执行的指令时，会产生非法指令异常。
    2. 地址未对齐异常：当执行加载或存储操作时，访问的内存地址未对齐，处理器会引发异常。
    3. 页面错误：在虚拟内存系统中，当页表缺失或内存访问权限不足时，会发生页错误异常。
    4. 环境调用（系统调用）：应用程序通过特定指令请求内核服务时，也会触发异常。

* 中断（Interrupt）是由外部硬件设备（如计时器、外设等）触发的信号，要求处理器暂停当前执行的程序，去处理这些外部事件。中断是异步的，即它们与当前指令执行无关，可能在任何时刻发生。根据中断来源的不同，可以分为以下几类：

    1. 硬件中断：由外部硬件设备产生，如外设的输入输出请求、定时器中断等。
    2. 软件中断：由软件触发，用于与操作系统交互或执行某些系统级别的任务。

* 陷入（Trap）是一种处理器从用户模式或较低特权级别切换到特权模式（如内核模式）处理事件的机制。处理器通过陷入机制捕获异常或中断，保存上下文信息，并跳转到相应的处理程序。处理完成后，处理器通过返回指令（如 mret 或 sret）恢复之前的执行状态，继续执行原来的程序。

#### 异常
TODO

#### 中断
TODO
